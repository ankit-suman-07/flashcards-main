# ðŸ“‚ Backend Folder Structure (Node.js + Express + PostgreSQL)

```
flashcard-app-backend/
â”‚â”€â”€ src/
â”‚   â”œâ”€â”€ config/
â”‚   â”‚   â”œâ”€â”€ db.ts                 # PostgreSQL connection (using Prisma/TypeORM/Knex)
â”‚   â”‚   â”œâ”€â”€ redis.ts              # Redis client config (optional caching/session)
â”‚   â”‚   â”œâ”€â”€ cloudinary.ts         # Cloudinary setup for image uploads
â”‚   â”‚   â”œâ”€â”€ passport.ts           # JWT + Passport.js strategies
â”‚   â”‚   â””â”€â”€ env.ts                # Centralized environment variables
â”‚   â”‚
â”‚   â”œâ”€â”€ controllers/              # Route handlers (API endpoints)
â”‚   â”‚   â”œâ”€â”€ user.controller.ts
â”‚   â”‚   â”œâ”€â”€ deck.controller.ts
â”‚   â”‚   â”œâ”€â”€ card.controller.ts
â”‚   â”‚   â”œâ”€â”€ revision.controller.ts
â”‚   â”‚   â”œâ”€â”€ playlist.controller.ts
â”‚   â”‚   â””â”€â”€ ai.controller.ts      # For OpenAI integration (Phase 4)
â”‚   â”‚
â”‚   â”œâ”€â”€ services/                 # Business logic (separate from controllers)
â”‚   â”‚   â”œâ”€â”€ user.service.ts
â”‚   â”‚   â”œâ”€â”€ deck.service.ts
â”‚   â”‚   â”œâ”€â”€ card.service.ts
â”‚   â”‚   â”œâ”€â”€ revision.service.ts
â”‚   â”‚   â”œâ”€â”€ playlist.service.ts
â”‚   â”‚   â””â”€â”€ ai.service.ts
â”‚   â”‚
â”‚   â”œâ”€â”€ models/                   # Database models/entities
â”‚   â”‚   â”œâ”€â”€ user.model.ts
â”‚   â”‚   â”œâ”€â”€ deck.model.ts
â”‚   â”‚   â”œâ”€â”€ card.model.ts
â”‚   â”‚   â”œâ”€â”€ cardProgress.model.ts
â”‚   â”‚   â”œâ”€â”€ playlist.model.ts
â”‚   â”‚   â””â”€â”€ aiJob.model.ts
â”‚   â”‚
â”‚   â”œâ”€â”€ routes/                   # API route definitions
â”‚   â”‚   â”œâ”€â”€ user.routes.ts
â”‚   â”‚   â”œâ”€â”€ deck.routes.ts
â”‚   â”‚   â”œâ”€â”€ card.routes.ts
â”‚   â”‚   â”œâ”€â”€ revision.routes.ts
â”‚   â”‚   â”œâ”€â”€ playlist.routes.ts
â”‚   â”‚   â””â”€â”€ ai.routes.ts
â”‚   â”‚
â”‚   â”œâ”€â”€ middleware/               # Middlewares for auth, errors, validation
â”‚   â”‚   â”œâ”€â”€ auth.middleware.ts
â”‚   â”‚   â”œâ”€â”€ error.middleware.ts
â”‚   â”‚   â””â”€â”€ validate.middleware.ts
â”‚   â”‚
â”‚   â”œâ”€â”€ utils/                    # Helper functions (non-business logic)
â”‚   â”‚   â”œâ”€â”€ logger.ts
â”‚   â”‚   â”œâ”€â”€ response.ts           # Standardized API responses
â”‚   â”‚   â”œâ”€â”€ pdfParser.ts          # pdf-parse integration for AI features
â”‚   â”‚   â””â”€â”€ spacedRepetition.ts   # Scheduling algorithm
â”‚   â”‚
â”‚   â”œâ”€â”€ tests/                    # Unit + integration tests
â”‚   â”‚   â”œâ”€â”€ user.test.ts
â”‚   â”‚   â”œâ”€â”€ deck.test.ts
â”‚   â”‚   â”œâ”€â”€ card.test.ts
â”‚   â”‚   â”œâ”€â”€ revision.test.ts
â”‚   â”‚   â””â”€â”€ playlist.test.ts
â”‚   â”‚
â”‚   â”œâ”€â”€ app.ts                    # Express app setup (middleware, routes)
â”‚   â””â”€â”€ server.ts                 # Entry point (start server)
â”‚
â”œâ”€â”€ prisma/ or migrations/        # DB schema (Prisma schema or Knex migrations)
â”‚
â”œâ”€â”€ .env                          # Environment variables
â”œâ”€â”€ Dockerfile                    # Backend Docker config
â”œâ”€â”€ docker-compose.yml            # DB + Redis + Backend container setup
â”œâ”€â”€ package.json
â””â”€â”€ tsconfig.json
```

---

## ðŸ”‘ Folder/File Explanations

* **`config/`** â†’ Setup files for PostgreSQL, Redis, Cloudinary, JWT/Passport, environment configs. Keeps app clean.
* **`controllers/`** â†’ Each file = API endpoints (thin layer). Just takes request â†’ calls `service` â†’ sends response.
* **`services/`** â†’ Actual business logic. E.g., spaced repetition, deck ownership checks, card creation.
* **`models/`** â†’ Database schema (if using ORM like Prisma/TypeORM). Represents **tables** like `User`, `Deck`, `Card`.
* **`routes/`** â†’ Maps URLs (`/api/decks/:id`) to controller functions. Keeps routing clean.
* **`middleware/`** â†’ Authentication (JWT), validation, error handling (centralized).
* **`utils/`** â†’ Helper modules like logger, PDF parsing, spaced repetition algorithm.
* **`tests/`** â†’ Jest/Mocha tests for controllers/services. Keeps things production-grade.
* **`app.ts`** â†’ Builds the Express app (middleware, routes).
* **`server.ts`** â†’ Starts the server (reads `PORT`, connects DB).
* **`prisma/` or `migrations/`** â†’ DB schema + migration history.

---

## âœ… Why This Works for Your Tools

* Fits **Express + PostgreSQL** workflow (with Prisma/Knex).
* Scales easily â†’ new features = add new service/controller/model/route.
* Clean separation (controllers = API, services = logic, models = DB).
* Supports **AI, Redis, Cloudinary, JWT** naturally.
* Docker + GitHub Actions ready.